set $mod Mod4
set $ter /usr/bin/termite
set $height 30
set $default_gaps_inner 10
set $default_gaps_outer 0
set $wallpaper '$(find $HOME/.local/share/wallpapers/ -type f -iname "*.jpg" | shuf -n 1)'

include base16-onedark.config

output eDP-1 scale 2
output eDP-1 pos 0 0 res 3840x2160
output HDMI-A-1 scale 1
output HDMI-A-1 pos 1920 0 res 1920x1080
output HDMI-A-1 subpixel rgb

output * bg $wallpaper fill

input type:keyboard {
    xkb_layout se_sv_dvorak
}

input 65261:4871:ErgoDox_EZ_ErgoDox_EZ {
    xkb_layout devdvorak
}

# Basic color configuration using the Base16 variables for windows and borders.
# Property Name         Border  BG      Text    Indicator Child Border
client.focused          $base05 $base0D $base00 $base0D $base0D
client.focused_inactive $base01 $base01 $base05 $base03 $base01
client.unfocused        $base01 $base00 $base05 $base01 $base01
client.urgent           $base08 $base08 $base00 $base08 $base08
client.placeholder      $base00 $base00 $base05 $base00 $base00
client.background       $base07

font pango:FontAwesome, Inconsolata 12

set $ws1  "1:  "
set $ws2  "2:  "
set $ws3  "3:  "
set $ws4  "4:  "
set $ws5  "5:  "
set $ws6  "6:  "
set $ws7  "7:  "
set $ws8  "8:  "
set $ws9  "9:  "
set $ws0 "10: "

gaps inner $default_gaps_inner
gaps outer $default_gaps_outer

workspace_auto_back_and_forth yes
force_display_urgency_hint 0 ms
focus_on_window_activation urgent

floating_minimum_size -1 x -1
floating_maximum_size -1 x -1

# assign apps to workspaces
assign [class="jetbrains-idea-ce"]               $ws1
assign [app_id="sublime_text|code-oss"]          $ws2
assign [app_id="termite"]                        $ws3
assign [class="Gnome-terminal"]                  $ws4
assign [class="DBeaver"]                         $ws5
assign [class="Chromium|Brave-browser|Firefox"]  $ws7
assign [class="slack|Slack"]                     $ws8
assign [app_id="deluge|Tixati"]                  $ws9


for_window [window_role="pop-up"]          floating enable
for_window [window_role="bubble"]          floating enable
for_window [window_role="task_dialog"]     floating enable
for_window [window_role="Preferences"]     floating enable
for_window [window_type="dialog"]          floating enable
for_window [window_type="menu"]            floating enable
for_window [class="galculator|Galculator"] floating enable
for_window [class="java-lang-Thread"]      floating enable

for_window [class="^.*"] border pixel 1

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

# start a terminal
bindsym $mod+Return exec $ter

# kill focused window
bindsym $mod+k kill

# start dmenu
bindsym $mod+d exec rofi -show run

# change focus
bindsym $mod+h focus left
bindsym $mod+t focus up
bindsym $mod+n focus down
bindsym $mod+s focus right

# move focused window
bindsym $mod+shift+h move left
bindsym $mod+shift+t move up
bindsym $mod+shift+n move down
bindsym $mod+shift+s move right

# split in horizontal orientation
bindsym $mod+z split h

# split in vertical orientation
bindsym $mod+v split v

# enter fullscreen mode for the focused container
bindsym $mod+f fullscreen toggle

# change container layout (stacked, tabbed, toggle split)
bindsym $mod+o layout stacking
bindsym $mod+comma layout tabbed
bindsym $mod+period layout toggle split

# toggle tiling / floating
bindsym $mod+shift+space floating toggle

# change focus between tiling / floating windows
bindsym $mod+space focus mode_toggle

# focus the parent container
# bindsym $mod+y focus parent

# focus the child container
#bindsym $mod+c focus child


# switch to workspace
bindsym $mod+1 workspace $ws1
bindsym $mod+2 workspace $ws2
bindsym $mod+3 workspace $ws3
bindsym $mod+4 workspace $ws4
bindsym $mod+5 workspace $ws5
bindsym $mod+6 workspace $ws6
bindsym $mod+7 workspace $ws7
bindsym $mod+8 workspace $ws8
bindsym $mod+9 workspace $ws9
bindsym $mod+0 workspace $ws0

# move focused container to workspace
bindsym $mod+shift+1 move container to workspace $ws1
bindsym $mod+shift+2 move container to workspace $ws2
bindsym $mod+shift+3 move container to workspace $ws3
bindsym $mod+shift+4 move container to workspace $ws4
bindsym $mod+shift+5 move container to workspace $ws5
bindsym $mod+shift+6 move container to workspace $ws6
bindsym $mod+shift+7 move container to workspace $ws7
bindsym $mod+shift+8 move container to workspace $ws8
bindsym $mod+shift+9 move container to workspace $ws9
bindsym $mod+shift+0 move container to workspace $ws0

bindsym $mod+ctrl+h move workspace to output left
bindsym $mod+ctrl+s move workspace to output right

bindsym XF86MonBrightnessDown exec brightnessctl -d intel_backlight set 5%-
bindsym XF86MonBrightnessUp exec brightnessctl -d intel_backlight set +5%

bindsym $mod+p exec grim -g "$(slurp)" $HOME/screenshots/$(date +'%Y-%m-%d_%T.png')

# modes

# resize window mode
bindsym $mod+r mode "$resize"
set $resize Resize (h) shrink width, (t) grow height, (n) shrink height, (s) grow width
mode "$resize" {
  bindsym h resize shrink width 10 px or 10 ppt
  bindsym t resize grow height 10 px or 10 ppt
  bindsym n resize shrink height 10 px or 10 ppt
  bindsym s resize grow width 10 px or 10 ppt

  bindsym Return mode "default"
  bindsym Escape mode "default"
}

# system mode
bindsym $mod+i mode "$system"
set $system System (c) reload config, (l) lock, (e) exit, (r) reboot, (s) shutdown
mode "$system" {
  bindsym l exec --no-startup-id swaylock-fancy, mode "default"
  bindsym e exit, mode "default"
  bindsym r exec --no-startup-id systemctl reboot, mode "default"
  bindsym s exec --no-startup-id systemctl poweroff, mode "default"
  bindsym c reload, mode "default"

  bindsym Return mode "default"
  bindsym Escape mode "default"
}


bar {
	position top
	strip_workspace_numbers yes
    font pango:FontAwesome, Inconsolata 12

	colors {
	    background $base00
	    separator  $base01
	    statusline $base04

	    # State             Border  BG      Text
	    focused_workspace   $base05 $base0D $base00
	    active_workspace    $base05 $base03 $base00
	    inactive_workspace  $base03 $base01 $base05
	    urgent_workspace    $base08 $base08 $base00
	    binding_mode        $base00 $base0A $base00
	}
	status_command /home/cvelin/code/bumblebee-status/bumblebee-status \
		--markup pango \
		-m \
            taskwarrior2 \
			vpn \
			github \
			pasink \
			datetime \
			battery \
		-p \
			datetime.format="%d %b, %H:%M" \
			datetime.interval="10" \
			github.token="" \
		-t onedark-powerline
}

exec mako

exec swayidle -w \
  timeout 300 'swaylock-fancy' \
  timeout 600 'swaymsg "output * dpms off"' \
  resume 'swaymsg "output * dpms on"' \
  before-sleep 'swaylock-fancy'
